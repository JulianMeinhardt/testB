{"version":3,"file":"adesso-grid-lib.js.map","sources":["ng://adesso-grid-lib/lib/input-verifier.service.ts","ng://adesso-grid-lib/lib/custom-template.directive.ts","ng://adesso-grid-lib/lib/tabbed-grid/tabbed-grid.component.ts","ng://adesso-grid-lib/lib/adesso-angular-lib.module.ts","ng://adesso-grid-lib/lib/model/tabbed-grid.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InputVerifierService {\r\n\r\n  constructor() { }\r\n\r\n  exists(parent: any, parentName: string, property: string) {\r\n    if (!parent[property]) {\r\n      throw new Error('Property \"' + property + '\"  is missing in ' + parentName + '!');\r\n    }\r\n  }\r\n\r\n  allExist(parent: any, parentName: string, properties: string[]) {\r\n    for (const property of properties) {\r\n      this.exists(parent, parentName, property);\r\n    }\r\n  }\r\n}\r\n","import { Directive, Input, TemplateRef, AfterViewInit } from '@angular/core';\r\nimport { InputVerifierService } from './input-verifier.service';\r\n\r\n@Directive({\r\n  selector: '[libCustomTemplate]'\r\n})\r\nexport class CustomTemplateDirective implements AfterViewInit {\r\n\r\n  @Input() property: string;\r\n\r\n  constructor(\r\n    public templateRef: TemplateRef<any>,\r\n    private inputVerifierService: InputVerifierService,\r\n  ) { }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.inputVerifierService.exists(this, 'CustomTemplateDirective', 'property');\r\n  }\r\n}\r\n","import { AfterViewInit, Component, ContentChild, ContentChildren, Input, QueryList, TemplateRef, ViewChild } from '@angular/core';\r\nimport { MatSort, MatTableDataSource } from '@angular/material';\r\nimport { CustomTemplateDirective } from '../custom-template.directive';\r\nimport { InputVerifierService } from '../input-verifier.service';\r\nimport { ITableDefinition, ITableRow, ITableTab } from '../model/tabbed-grid';\r\n\r\n@Component({\r\n  selector: 'lib-tabbed-grid',\r\n  templateUrl: './tabbed-grid.component.html',\r\n  styleUrls: ['./tabbed-grid.component.css']\r\n})\r\nexport class TabbedGridComponent implements AfterViewInit {\r\n  @Input() computeTabLabel: (data: any) => string;\r\n  @Input() tableDefinition: ITableDefinition;\r\n  @Input() displayedColumns: string[];\r\n\r\n  @ContentChild('detailsTemplate') detailsTemplate: TemplateRef<any>;\r\n  @ContentChildren(CustomTemplateDirective) customTemplateDirectives: QueryList<CustomTemplateDirective>;\r\n  @ViewChild(MatSort) sort: MatSort;\r\n\r\n  tabs: ITableTab[] = [];\r\n  selectedTabIndex = 0;\r\n  dataSource: MatTableDataSource<any>;\r\n  customTemplateRefs: { [key: string]: TemplateRef<any> } = {};\r\n\r\n  constructor(\r\n    private inputVerifierService: InputVerifierService,\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.inputVerifierService.allExist(this, 'TabbedGridComponent', [\r\n      'computeTabLabel',\r\n      'tableDefinition',\r\n      'detailsTemplate',\r\n    ]);\r\n\r\n    this.customTemplateDirectives.forEach((t) => {\r\n      if (this.customTemplateRefs[t.property]) {\r\n        throw new Error('Duplicate custom template definition found for ' + t.property);\r\n      }\r\n\r\n      this.customTemplateRefs[t.property] = t.templateRef;\r\n    });\r\n  }\r\n\r\n  rowClick(row: ITableRow) {\r\n    const tabNumber = this.tabs.findIndex((e) => e.row.id === row.id);\r\n\r\n    if (tabNumber === -1) {\r\n      this.tabs.push({ label: this.computeTabLabel(row.data), row });\r\n      this.selectedTabIndex = this.tabs.length;\r\n    } else {\r\n      this.selectedTabIndex = tabNumber + 1;\r\n    }\r\n  }\r\n\r\n  closeTab(index: number) {\r\n    this.tabs.splice(index, 1);\r\n    if (index === this.selectedTabIndex - 1) {\r\n      this.selectedTabIndex = 0;\r\n    }\r\n  }\r\n\r\n  getCustomTemplate(property: string): TemplateRef<any> {\r\n    const customTemplateRef = this.customTemplateRefs[property];\r\n    if (!customTemplateRef) {\r\n      throw new Error('Could not find custom template definition for ' + property);\r\n    }\r\n    return customTemplateRef;\r\n  }\r\n\r\n  @Input()\r\n  set tableData(data: any[]) {\r\n    if (!data) {\r\n      this.dataSource = null;\r\n      return;\r\n    }\r\n\r\n    let id = 0;\r\n    const rows = data.map<ITableRow>((v) => ({ data: v, id: id++ }));\r\n    this.dataSource = new MatTableDataSource(rows);\r\n    this.dataSource.sortingDataAccessor = (row: ITableRow, property) => {\r\n      return row.data[property];\r\n    };\r\n    this.dataSource.sort = this.sort;\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatSortModule, MatTableModule, MatTabsModule } from '@angular/material';\r\nimport { TabbedGridComponent } from './tabbed-grid/tabbed-grid.component';\r\nimport { CustomTemplateDirective } from './custom-template.directive';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatSortModule,\r\n    MatTabsModule,\r\n    MatTableModule,\r\n  ],\r\n  declarations: [\r\n    TabbedGridComponent,\r\n    CustomTemplateDirective,\r\n  ],\r\n  exports: [\r\n    TabbedGridComponent,\r\n    CustomTemplateDirective,\r\n  ]\r\n})\r\nexport class AdessoAngularLibModule { }\r\n","export enum ColumnType {\r\n    TEXT = 'TEXT',\r\n    DATE = 'DATE',\r\n    NUMBER = 'NUMBER',\r\n    ENUM = 'ENUM',\r\n}\r\n\r\nexport interface ITableColumnDefinition {\r\n    customContent?: boolean;\r\n    label: string;\r\n    property: string;\r\n    type: ColumnType;\r\n}\r\n\r\nexport interface ITableDefinition {\r\n    columns: ITableColumnDefinition[];\r\n    displayedColumns: string[];\r\n}\r\n\r\nexport interface ITableRow {\r\n    data: any;\r\n    id: number;\r\n}\r\n\r\nexport interface ITableTab {\r\n    row: ITableRow;\r\n    label: string;\r\n}\r\n"],"names":[],"mappings":"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"}
